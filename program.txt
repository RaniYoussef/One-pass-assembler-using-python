COPY START 1000
EOF BYTE C'EOF'
THREE WORD 3
ZERO WORD 0
RETADR RESW 1
LENGTH RESW 1
BUFFER RESB 4096
FIRST STL RETADR
CLOOP JSUB RDREC
LDA LENGTH
COMP ZERO
JEQ ENDFILL
JSUB WRREC
J CLOOP
ENDFILL LDA EOF
STA BUFFER
LDA THREE
STA LENGTH
JSUB WRREC
LDL RETADR
FIX
LDX ZERO
RDREC STCH BUFFER,x
LDA #3
WRREC LDX ZERO
RSUB
END